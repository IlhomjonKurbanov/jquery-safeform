<html>
<head>
	<title>jquery-safeform</title>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js" ></script>
	<script type="text/javascript" src="jquery.safeform.js" ></script>
	<script type="text/javascript">
		$(document).ready(function() {

			$('#testsafe').safeform({
				timeout: 3000,	// auto refresh after 3 sec.
				submit: function() {
					var name = $('#firsname').val();
					if (name !== '') {
						$('#firsname').val('');
						$('#testresults').append($('<div>' + name + '</div>'));

						// emulate waiting...
						for (var i=0; i < 100000; i++) {
							$.isFunction($('#testresults'));
						}
					}

					// manual complete, reenable form ASAP
					//$('#testsafe').safeform('complete');

					return false;
				}
			});
		});
	</script>
</head>
<body>
	<form id="testsafe" action="/">
	<div>
		<input id="firsname" name="firsname" type="text" />
		<input type="submit" onclick="javascript: $('#testsafe').submit(); return false;"/>
	</div>
	</form>
	<div id="testresults"></div>
</body>
</html>